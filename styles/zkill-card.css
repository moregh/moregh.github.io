/*
Copyright (C) 2025 moregh (https://github.com/moregh/)
Licensed under AGPL License.
*/

/* zkill card war eligibility badges */
.zkill-war-badge {
    display: inline-block;
    background: linear-gradient(135deg, #ff4757, #ff3742);
    color: white;
    padding: 2px 6px;
    border-radius: 8px;
    font-size: 0.7rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-left: 8px;
    box-shadow: 0 2px 6px rgba(255, 71, 87, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.2);
    animation: warPulse 2s infinite;
    vertical-align: middle;
}

/* Highlight war-eligible zkill cards */
.zkill-stats-card.war-eligible {
    border: 2px solid rgba(255, 71, 87, 0.4);
    box-shadow: 0 0 20px rgba(255, 71, 87, 0.2);
}

/* ============================
Modal & Card
============================ */
.zkill-modal-backdrop {
position: fixed;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: rgba(0, 0, 0, 0.85);
backdrop-filter: blur(12px);
z-index: 10000;
display: flex;
align-items: center;
justify-content: center;
padding: 2rem;
opacity: 0;
visibility: hidden;
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
overflow-y: auto;
}
.zkill-modal-backdrop.show {
opacity: 1;
visibility: visible;
}

.zkill-stats-card {
background: linear-gradient(135deg,
rgba(10, 10, 10, 0.95) 0%,
rgba(15, 15, 20, 0.95) 50%,
rgba(10, 10, 10, 0.95) 100%);
backdrop-filter: blur(24px);
border: 2px solid rgba(0, 212, 255, 0.3);
border-radius: 20px;
box-shadow:
0 25px 80px rgba(0, 0, 0, 0.5),
0 0 0 1px rgba(255, 255, 255, 0.1),
inset 0 1px 0 rgba(255, 255, 255, 0.2);
max-width: 900px;
width: 100%;
max-height: 90vh;
overflow: visible;
position: relative;
transform: scale(0.8) translateY(50px);
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.zkill-modal-backdrop.show .zkill-stats-card {
transform: scale(1) translateY(0);
}

/* ============================
Header
============================ */
.zkill-card-header {
padding: 1.5rem 2rem;
border-bottom: 1px solid rgba(255, 255, 255, 0.1);
display: flex;
align-items: center;
justify-content: flex-start;
background: linear-gradient(90deg,
rgba(0, 212, 255, 0.1) 0%,
rgba(74, 222, 128, 0.05) 50%,
rgba(0, 212, 255, 0.1) 100%);
position: relative;
}
.zkill-card-header::after {
content: '';
position: absolute;
bottom: 0;
left: 0;
right: 0;
height: 1px;
background: linear-gradient(90deg,
transparent,
rgba(0, 212, 255, 0.5),
rgba(74, 222, 128, 0.5),
transparent);
}

/* Floating controls in header (close/back) */
.zkill-header-controls {
position: absolute;
top: -15px;
right: -15px;
display: flex;
gap: 8px;
z-index: 10901;
pointer-events: none;
}

/* ============================
Entity (avatar, details, affiliations)
============================ */
.zkill-entity-avatar {
width: 60px;
height: 60px;
border-radius: 12px;
border: 2px solid rgba(255, 255, 255, 0.2);
object-fit: cover;
background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
}

.zkill-entity-info {
display: flex;
align-items: center;
gap: 1rem;
flex: 1;
}

.zkill-entity-details {
display: flex;
flex-direction: column;
min-width: 0;
}

.zkill-entity-details h2 {
font-size: 1.4rem;
font-weight: 700;
color: var(--primary-color);
margin-bottom: 0.25rem;
display: flex;
align-items: center;
gap: 0.5rem;
white-space: nowrap;
}

.zkill-entity-type {
font-size: 0.9rem;
color: var(--text-secondary);
text-transform: capitalize;
}

/* Affiliations - horizontal by default */
.zkill-entity-affiliations {
display: flex;
gap: 1rem;
align-items: center;
margin-left: 2rem;
flex-shrink: 0;
}

.zkill-affiliation-item {
display: flex;
align-items: center;
gap: 0.5rem;
padding: 0.5rem 0.75rem;
background: rgba(255, 255, 255, 0.03);
border: 1px solid rgba(255, 255, 255, 0.1);
border-radius: 8px;
transition: all 0.2s ease;
white-space: nowrap;
}
.zkill-affiliation-item:hover {
background: rgba(255, 255, 255, 0.06);
border-color: rgba(0, 212, 255, 0.3);
transform: translateY(-1px);
}

.zkill-affiliation-logo {
width: 32px;
height: 32px;
border-radius: 6px;
object-fit: cover;
border: 1px solid rgba(255, 255, 255, 0.1);
background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
transition: opacity 0.3s ease;
flex-shrink: 0;
}
.zkill-affiliation-info {
display: flex;
flex-direction: column;
min-width: 0;
}
.zkill-affiliation-label {
font-size: 0.7rem;
color: var(--text-muted);
text-transform: uppercase;
letter-spacing: 0.05em;
margin-bottom: 0.1rem;
}
.zkill-affiliation-link {
color: var(--primary-color);
text-decoration: none;
font-size: 0.85rem;
font-weight: 500;
transition: color 0.2s ease;
overflow: hidden;
text-overflow: ellipsis;
}
.zkill-affiliation-link:hover {
color: #66e0ff;
text-decoration: underline;
}

/* ============================
Header Buttons (Close & Back)
============================ */
.zkill-close-btn,
.zkill-back-btn {
pointer-events: auto;
border-radius: 50%;
cursor: pointer;
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
display: flex;
align-items: center;
justify-content: center;
font-weight: 600;
backdrop-filter: blur(8px);
}

.zkill-close-btn {
background: linear-gradient(135deg, rgba(248, 113, 113, 0.9), rgba(220, 38, 38, 0.9));
border: 2px solid rgba(248, 113, 113, 0.6);
color: white;
padding: 0;
font-size: 16px;
width: 36px;
height: 36px;
box-shadow: 0 4px 12px rgba(248, 113, 113, 0.3),
0 2px 4px rgba(0, 0, 0, 0.2);
}
.zkill-close-btn:hover {
background: linear-gradient(135deg, rgba(248, 113, 113, 1), rgba(220, 38, 38, 1));
border-color: rgba(248, 113, 113, 0.8);
transform: scale(1.1) rotate(90deg);
box-shadow: 0 6px 20px rgba(248, 113, 113, 0.5),
0 4px 8px rgba(0, 0, 0, 0.3);
}

.zkill-back-btn {
background: linear-gradient(135deg, rgba(0, 212, 255, 0.9), rgba(0, 153, 204, 0.9));
border: 2px solid rgba(0, 212, 255, 0.6);
color: white;
padding: 0;
font-size: 14px;
width: 32px;
height: 32px;
box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3),
0 2px 4px rgba(0, 0, 0, 0.2);
}
.zkill-back-btn:hover {
background: linear-gradient(135deg, rgba(0, 212, 255, 1), rgba(0, 153, 204, 1));
border-color: rgba(0, 212, 255, 0.8);
transform: scale(1.1) translateX(-2px);
box-shadow: 0 6px 20px rgba(0, 212, 255, 0.5),
0 4px 8px rgba(0, 0, 0, 0.3);
}

/* ============================
Card Content & Sections
============================ */
.zkill-card-content {
padding: 2rem;
max-height: calc(90vh - 120px);
overflow-y: auto;
}

.zkill-section {
margin-bottom: 2rem;
}

.zkill-section-title {
font-size: 1.2rem;
font-weight: 600;
color: var(--text-primary);
margin-bottom: 1rem;
display: flex;
align-items: center;
gap: 0.5rem;
padding-bottom: 0.5rem;
border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}
.zkill-section-icon {
font-size: 1.1rem;
color: var(--primary-color);
}

/* ============================
Stats Grid
============================ */
.zkill-stats-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 1rem;
margin-bottom: 2rem;
}

.zkill-stat-item {
background: rgba(255, 255, 255, 0.03);
border: 1px solid rgba(255, 255, 255, 0.1);
border-radius: 12px;
padding: 1.2rem;
text-align: center;
position: relative;
transition: all 0.3s ease;
overflow: hidden;
}
.zkill-stat-item::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
height: 3px;
background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
opacity: 0.6;
}
.zkill-stat-item:hover {
transform: translateY(-2px);
background: rgba(255, 255, 255, 0.06);
border-color: rgba(0, 212, 255, 0.3);
}
.zkill-stat-value {
font-size: 1.8rem;
font-weight: 800;
color: var(--primary-color);
margin-bottom: 0.5rem;
display: block;
}
.zkill-stat-label {
font-size: 0.9rem;
color: var(--text-secondary);
text-transform: uppercase;
letter-spacing: 0.05em;
font-weight: 500;
}
.zkill-stat-item.kills .zkill-stat-value { color: var(--secondary-color); }
.zkill-stat-item.losses .zkill-stat-value { color: var(--danger-color); }
.zkill-stat-item.efficiency .zkill-stat-value { color: var(--warning-color); }

/* ============================
Activity (timeline + grid)
============================ */
.zkill-activity-timeline {
display: flex;
gap: 1rem;
margin-bottom: 1rem;
}
.zkill-activity-period {
flex: 1;
background: rgba(255, 255, 255, 0.03);
border-radius: 8px;
padding: 1rem;
text-align: center;
border-left: 3px solid var(--primary-color);
transition: all 0.2s ease;
}
.zkill-activity-period:hover {
background: rgba(255, 255, 255, 0.06);
transform: translateY(-1px);
}
.zkill-activity-period-label {
font-size: 0.8rem;
color: var(--text-secondary);
text-transform: uppercase;
margin-bottom: 0.5rem;
}
.zkill-activity-values {
display: flex;
justify-content: space-between;
gap: 0.5rem;
}
.zkill-activity-kills { color: var(--secondary-color); font-weight: 600; }
.zkill-activity-losses { color: var(--danger-color); font-weight: 600; }

/* Recent activity grid */
.zkill-activity-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
gap: 1rem;
margin-bottom: 1rem;
}
.zkill-activity-card {
background: rgba(255, 255, 255, 0.03);
border: 1px solid rgba(255, 255, 255, 0.1);
border-radius: 12px;
padding: 1rem;
text-align: center;
transition: all 0.3s ease;
position: relative;
overflow: hidden;
}
.zkill-activity-card::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
height: 3px;
background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
opacity: 0.6;
}
.zkill-activity-card:hover {
transform: translateY(-2px);
background: rgba(255, 255, 255, 0.06);
border-color: rgba(0, 212, 255, 0.3);
}
.zkill-activity-icon {
font-size: 1.5rem;
margin-bottom: 0.5rem;
opacity: 0.8;
}
.zkill-activity-number {
font-size: 1.4rem;
font-weight: 700;
color: var(--primary-color);
margin-bottom: 0.25rem;
}
.zkill-activity-label {
font-size: 0.8rem;
color: var(--text-secondary);
text-transform: uppercase;
letter-spacing: 0.05em;
font-weight: 500;
}

/* ============================
Locations (compact grid + hidden legacy list)
============================ */
.zkill-locations-grid {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(155px, 1fr));
gap: 0.8rem;
margin-bottom: 1rem;
}
.zkill-location-card {
background: rgba(255, 255, 255, 0.03);
border: 1px solid rgba(255, 255, 255, 0.1);
border-radius: 8px;
padding: 0.8rem;
border-left: 3px solid var(--secondary-color);
transition: all 0.2s ease;
min-height: 60px;
display: flex;
flex-direction: column;
justify-content: space-between;
}
.zkill-location-card:hover {
background: rgba(255, 255, 255, 0.06);
transform: translateY(-1px);
border-left-color: var(--primary-color);
}
.zkill-location-name {
font-weight: 600;
color: var(--text-primary);
font-size: 0.9rem;
margin-bottom: 0.4rem;
line-height: 1.2;
}
.zkill-location-bottom {
display: flex;
align-items: center;
justify-content: space-between;
gap: 0.5rem;
}
.zkill-location-security {
padding: 0.15rem 0.4rem;
border-radius: 10px;
font-size: 0.7rem;
font-weight: 600;
flex-shrink: 0;
}
.zkill-location-security.highsec { background: rgba(74, 222, 128, 0.2); color: var(--secondary-color); }
.zkill-location-security.lowsec { background: rgba(251, 191, 36, 0.2); color: var(--warning-color); }
.zkill-location-security.nullsec { background: rgba(248, 113, 113, 0.2); color: var(--danger-color); }
.zkill-location-security.unknown { background: rgba(128, 128, 128, 0.2); color: var(--text-muted); }
.zkill-location-kills {
color: var(--secondary-color);
font-size: 0.8rem;
font-weight: 600;
}
.zkill-location-stats {
display: flex;
gap: 1rem;
font-size: 0.9rem;
}

/* Remove old legacy location list styles (kept hidden) */
.zkill-locations-list { display: none; }
.zkill-location-item { display: none; }

/* ============================
Charts
============================ */
.zkill-charts-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
gap: 1.5rem;
margin-bottom: 1rem;
}
.zkill-chart-container {
background: rgba(255, 255, 255, 0.03);
border: 1px solid rgba(255, 255, 255, 0.1);
border-radius: 12px;
padding: 1rem;
position: relative;
overflow: hidden;
}
.zkill-chart-container::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
height: 3px;
background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
opacity: 0.6;
}
.zkill-chart-title {
font-size: 0.9rem;
font-weight: 600;
color: var(--text-primary);
margin-bottom: 1rem;
text-align: center;
}
.zkill-chart {
width: 100%;
height: auto;
display: block;
}
.zkill-chart-bar {
transition: all 0.2s ease;
cursor: pointer;
}
.zkill-chart-bar:hover { opacity: 0.8; stroke-width: 2; }
.zkill-chart-label { font-family: 'Inter', sans-serif; font-weight: 500; }

.zkill-charts-empty {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
padding: 2rem;
color: var(--text-muted);
text-align: center;
}
.zkill-charts-empty .zkill-empty-icon { font-size: 2rem; margin-bottom: 0.5rem; opacity: 0.5; }
.zkill-charts-empty .zkill-empty-text { font-size: 0.9rem; color: var(--text-secondary); }

/* ============================
Members Dropdown
============================ */
.zkill-members-section {
margin-top: -2rem;
margin-bottom: 1rem;
}
.zkill-members-dropdown {
background: rgba(255, 255, 255, 0.03);
border: 1px solid rgba(255, 255, 255, 0.1);
border-radius: 12px;
overflow: hidden;
margin-top: 1rem;
}
.zkill-members-header {
display: flex;
align-items: center;
justify-content: space-between;
padding: 1rem 1.2rem;
background: rgba(255, 255, 255, 0.05);
cursor: pointer;
transition: all 0.2s ease;
border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}
.zkill-members-header:hover { background: rgba(255, 255, 255, 0.08); }

.zkill-members-title {
font-size: 1rem;
font-weight: 600;
color: var(--text-primary);
display: flex;
align-items: center;
gap: 0.5rem;
}
.zkill-members-count {
background: rgba(0, 212, 255, 0.2);
color: var(--primary-color);
padding: 0.2rem 0.6rem;
border-radius: 12px;
font-size: 0.8rem;
font-weight: 600;
}
.zkill-members-toggle {
font-size: 1.2rem;
color: var(--text-secondary);
transition: transform 0.2s ease;
}
.zkill-members-dropdown.expanded .zkill-members-toggle { transform: rotate(180deg); }

.zkill-members-list {
max-height: 0;
overflow: hidden;
transition: max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.zkill-members-dropdown.expanded .zkill-members-list {
max-height: 300px;
overflow-y: auto;
}
.zkill-members-content { padding: 0; }

.zkill-member-item {
display: flex;
align-items: center;
gap: 0.8rem;
padding: 0.8rem 1.2rem;
border-bottom: 1px solid rgba(255, 255, 255, 0.05);
cursor: pointer;
transition: all 0.2s ease;
}
.zkill-member-item:hover { background: rgba(255, 255, 255, 0.05); padding-left: 1.5rem; }
.zkill-member-item:last-child { border-bottom: none; }

.zkill-member-avatar {
width: 32px;
height: 32px;
border-radius: 6px;
object-fit: cover;
border: 1px solid rgba(255, 255, 255, 0.1);
background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
transition: opacity 0.3s ease;
flex-shrink: 0;
}
.zkill-member-info { flex: 1; min-width: 0; }
.zkill-member-name {
font-size: 0.9rem;
font-weight: 500;
color: var(--text-primary);
margin-bottom: 0.2rem;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}
.zkill-member-details {
font-size: 0.75rem;
color: var(--text-secondary);
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
}

/* ============================
Loading / Error / Empty states
============================ */
.zkill-loading {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
padding: 3rem;
gap: 1rem;
}
.zkill-loading-spinner {
width: 40px;
height: 40px;
border: 3px solid rgba(0, 212, 255, 0.2);
border-radius: 50%;
border-top-color: var(--primary-color);
animation: spin 1s linear infinite;
}
.zkill-loading-text { color: var(--text-secondary); font-size: 1rem; }

.zkill-error {
text-align: center;
padding: 2rem;
color: var(--danger-color);
}
.zkill-error-icon { font-size: 3rem; margin-bottom: 1rem; opacity: 0.7; }
.zkill-error-text { font-size: 1.1rem; margin-bottom: 0.5rem; }
.zkill-error-details { font-size: 0.9rem; color: var(--text-secondary); }

.zkill-empty {
text-align: center;
padding: 2rem;
color: var(--text-muted);
}
.zkill-empty-icon { font-size: 3rem; margin-bottom: 1rem; opacity: 0.5; }

/* ============================
Responsive - Large -> Medium -> Small
============================ */

@media (max-width: 1024px) {
.zkill-entity-info { flex-wrap: wrap; gap: 0.75rem; }
.zkill-entity-affiliations {
margin-left: 0;
width: 100%;
justify-content: flex-start;
}
}

@media (max-width: 768px) {
/* Modal & card */
.zkill-modal-backdrop { padding: 1rem; }
.zkill-stats-card {
max-height: calc(95vh - 2rem);
border-radius: 16px;
margin: 1rem;
}
/* Header */
.zkill-header-controls { top: -12px; right: -12px; gap: 6px; }
.zkill-card-header { padding: 1rem 1.5rem; flex-direction: column; gap: 1rem; text-align: center; }

/* Buttons sizing */
.zkill-close-btn { width: 32px; height: 32px; font-size: 14px; }
.zkill-back-btn  { width: 28px; height: 28px; font-size: 12px; }

/* Content */
.zkill-card-content { padding: 1.5rem; }
.zkill-stats-grid { grid-template-columns: repeat(2, 1fr); gap: 0.8rem; }
.zkill-entity-info { flex-direction: column; text-align: center; width: 100%; }
.zkill-entity-affiliations { flex-direction: column; gap: 0.5rem; margin-left: 0; width: 100%; }
.zkill-affiliation-item { justify-content: center; width: 100%; max-width: 280px; margin: 0 auto; }
.zkill-affiliation-logo { width: 28px; height: 28px; }
.zkill-affiliation-link { font-size: 0.8rem; }

/* Activity & locations */
.zkill-activity-timeline { flex-direction: column; gap: 0.8rem; }
.zkill-activity-grid { grid-template-columns: repeat(2, 1fr); gap: 0.8rem; }
.zkill-location-card { padding: 0.8rem; }
.zkill-locations-grid { grid-template-columns: 1fr; gap: 0.6rem; }
.zkill-location-bottom { justify-content: center; }

/* Members */
.zkill-members-list { max-height: 0; }
.zkill-members-dropdown.expanded .zkill-members-list { max-height: 250px; }
.zkill-member-item { padding: 0.6rem 1rem; }
.zkill-member-avatar { width: 28px; height: 28px; }

/* Charts */
.zkill-charts-grid { grid-template-columns: 1fr; gap: 1rem; }
.zkill-chart-container { padding: 0.8rem; }
.zkill-chart-title { font-size: 0.8rem; margin-bottom: 0.8rem; }

/* Header controls adjust */
.zkill-header-controls { top: -8px; right: -8px; gap: 6px; }
}
/* Small screens */
@media (max-width: 480px) {
.zkill-modal-backdrop { padding: 0.5rem; }
.zkill-stats-card { margin: 0.5rem; max-height: calc(95vh - 1rem); }
.zkill-header-controls { top: -8px; right: -8px; gap: 4px; }
.zkill-close-btn { width: 28px; height: 28px; font-size: 12px; }
.zkill-back-btn { width: 24px; height: 24px; font-size: 10px; }
.zkill-stats-grid { grid-template-columns: 1fr; }
.zkill-entity-avatar { width: 48px; height: 48px; }
.zkill-entity-details h2 { font-size: 1.2rem; flex-direction: column; gap: 0.25rem; }

.zkill-activity-grid { grid-template-columns: 1fr; }
.zkill-activity-card { padding: 0.8rem; }
.zkill-activity-number { font-size: 1.2rem; }
.zkill-activity-icon { font-size: 1.3rem; }

.zkill-location-card { padding: 0.6rem; min-height: 50px; }
.zkill-location-name { font-size: 0.9rem; }
.zkill-location-security { padding: 0.15rem 0.4rem; font-size: 0.7rem; border-radius: 10px; }

.zkill-affiliation-item { padding: 0.4rem 0.6rem; max-width: 240px; }
.zkill-affiliation-logo { width: 24px; height: 24px; }
.zkill-affiliation-link { font-size: 0.75rem; }
.zkill-affiliation-label { font-size: 0.65rem; }

.zkill-chart { width: 100%; height: 150px; }
.zkill-chart-container { padding: 0.6rem; }
}